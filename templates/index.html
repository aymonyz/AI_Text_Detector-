<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>AI Text Detector</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

  <!-- Top Bar -->
  <div class="topbar">
    <div class="brand">
      <div class="logo">UST</div>
      <div>
        <div class="title">AI Text Detector</div>
        <div class="subtitle">Graduation Project • Explainable Detection</div>
      </div>
    </div>
  </div>

  <!-- Main Wrapper -->
  <div class="wrap">
    <div class="grid">

      <!-- Input Card -->
      <div class="card">
        <h2>Write Text</h2>
        <p class="muted">Paste your text below or upload a document, then click Analyze.</p>

        <form method="POST" enctype="multipart/form-data">
          <textarea name="text" placeholder="Paste your text here...">{{ text or "" }}</textarea>

          <input type="file" name="file" accept=".pdf,.docx" class="file-input">

          <div class="actions">
            <button class="btn" type="submit">Analyze Text</button>
            <button class="btn ghost" type="button" id="clearBtn">Clear</button>
          </div>
        </form>

        <div class="hint">
          Tip: For best accuracy, use 150+ words. Very short text may be unreliable.
        </div>
      </div>

      <!-- Result Card -->
      <div class="card">
        <h2>Result</h2>

        {% if result and result.ok %}
          <!-- KPI Section -->
          <div class="kpis">
            <div class="kpi">
              <div class="kpi-label">AI Generated</div>
              <div class="kpi-val" id="aiVal">{{ result.ai_percentage }}%</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Human</div>
              <div class="kpi-val">{{ result.human_percentage }}%</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Confidence</div>
              <div class="kpi-val">{{ result.confidence }}</div>
            </div>
          </div>

          <!-- Progress Bar -->
          <div class="bar">
            <div class="bar-fill" style="width: {{ result.ai_percentage }}%"></div>
          </div>

          <!-- Classification -->
          <div class="badge-row">
            <span class="badge">{{ result.classification }}</span>
            {% if result.truncated %}
              <span class="badge warn">Input truncated for performance</span>
            {% endif %}
          </div>

          <!-- Reasons -->
          <h3>Why this decision?</h3>
          <ul class="reasons">
            {% for r in result.reasons %}
              <li>{{ r }}</li>
            {% endfor %}
          </ul>

          <!-- Metrics -->
          <h3>Metrics</h3>
          <div class="metrics">
            <div><span>Perplexity</span><b>{{ result.metrics.perplexity }}</b></div>
            <div><span>Lexical Diversity</span><b>{{ result.metrics.lexical_diversity }}</b></div>
            <div><span>Repetition Score</span><b>{{ result.metrics.repetition_score }}</b></div>
            <div><span>Burstiness</span><b>{{ result.metrics.burstiness }}</b></div>
            <div><span>Sentences</span><b>{{ result.metrics.sentences }}</b></div>
            <div><span>Avg Sentence Length</span><b>{{ result.metrics.avg_sentence_length }}</b></div>
          </div>

          <!-- Sentence Level -->
          {% if result.sentences %}
          <h3>Sentence-level Analysis</h3>
          <div class="sentences">
            {% for s in result.sentences %}
              <div class="sentence {{ 'ai' if s.ai_like else 'human' }}">
                {{ s.text }}
                <span class="ppl">PPL: {{ s.perplexity }}</span>
              </div>
            {% endfor %}
          </div>
          {% endif %}

        {% else %}
          <div class="empty">
            No analysis yet. Submit text to see AI percentage and explanations.
          </div>
        {% endif %}
      </div>

    </div>

    <!-- Footer -->
    <div class="footer">
      <div>© Graduation Project • IT • Explainable AI Text Detection</div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    document.getElementById("clearBtn")?.addEventListener("click", () => {
      const ta = document.querySelector("textarea[name='text']");
      if (ta) ta.value = "";
    });
  </script>

</body>
</html>


<!-- 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Text Detector</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>AI Text Detector</h1>
    <p>Detect AI-generated text with explanation</p>

    <form method="POST">
        <textarea name="text" placeholder="Paste your text here..." required></textarea>
        <button type="submit">Analyze Text</button>
    </form>

    {% if result %}
    <div class="result">
        <h2>Result</h2>
        <p><strong>Classification:</strong> {{ result.label }}</p>
        <p><strong>Perplexity:</strong> {{ result.perplexity }}</p>
        <p><strong>Confidence:</strong> {{ result.confidence }}</p>

        <h3>Reasons</h3>
        <ul>
            {% for reason in result.reasons %}
            <li>{{ reason }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>

</body>
</html> -->
